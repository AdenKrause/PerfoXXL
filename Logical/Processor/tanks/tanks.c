#ifdef _DEFAULT_INCLUDES
	#include <AsDefault.h>
#endif
/*
                             *******************
******************************* C SOURCE FILE *******************************
**                           *******************                           **
**                                                                         **
** project  : BlueFin                                                      **
** filename : TANKS.C                                                      **
** version  : 1.10                                                         **
** date     : 09.03.2007                                                   **
**                                                                         **
*****************************************************************************
** Abstract                                                                **
** ========                                                                **
** Handling of Prewash, Rinse and Gum stations, basically just call        **
** functions of respective source files                                    **
**                                                                         **
** Copyright (c) 2007, Krause-Biagosch GmbH                                **
** All rights reserved.                                                    **
**                                                                         **
*****************************************************************************
VERSION HISTORY:
----------------
Version     : 1.00
Date        : 06.03.2007
Revised by  : Herbert Aden
Description : Original version, moved functionality from
              developertank task to here.

Version     : 1.10
Date        : 03.05.2007
Revised by  : Herbert Aden
Description : changes in rinse.c and prewash.c
*/
#define _TANKS_C_SRC

/****************************************************************************/
/**                                                                        **/
/**                           INCLUDE FILES                                **/
/**                                                                        **/
/****************************************************************************/
#include "egmglob_var.h"

/****************************************************************************/
/**                                                                        **/
/**                       DEFINITIONS AND MACROS                           **/
/**                                                                        **/
/****************************************************************************/
/* NONE */

/****************************************************************************/
/**                                                                        **/
/**                      TYPEDEFS AND STRUCTURES                           **/
/**                                                                        **/
/****************************************************************************/
/* NONE */

/****************************************************************************/
/**                                                                        **/
/**                      PROTOTYPES OF LOCAL FUNCTIONS                     **/
/**                                                                        **/
/****************************************************************************/
/* NONE */

/****************************************************************************/
/**                                                                        **/
/**                      PRTOTYPES OF EXTERNAL FUNCTIONS                   **/
/**                                                                        **/
/****************************************************************************/
extern void Prewash(void);
extern void Rinse(void);
extern void Gum(void);
extern void InitGum(void);

/****************************************************************************/
/**                                                                        **/
/**                      EXPORTED VARIABLES                                **/
/**                                                                        **/
/****************************************************************************/
/* NONE */

/****************************************************************************/
/**                                                                        **/
/**                           GLOBAL VARIABLES                             **/
/**                                                                        **/
/****************************************************************************/
/*NONE*/

/****************************************************************************/
/**                                                                        **/
/**                      TASK-LOCAL VARIABLES                              **/
/**                                                                        **/
/****************************************************************************/
/*NONE*/

/****************************************************************************/
/**                                                                        **/
/**                    MODULE-LOCAL VARIABLES                              **/
/**                                                                        **/
/****************************************************************************/
static    TON_10ms_typ        PulseTimer1;

/****************************************************************************/
/**                                                                        **/
/**                      EXPORTED VARIABLES                                **/
/**                                                                        **/
/****************************************************************************/
BOOL	Pulse_1s;


/****************************************************************************/
/**                                                                        **/
/**                          LOCAL FUNCTIONS                               **/
/**                                                                        **/
/****************************************************************************/


/****************************************************************************/
/** Init function, executed once at startup                                **/
/****************************************************************************/
_INIT void init()
{
	PulseTimer1.IN = 0;
	PulseTimer1.PT = 100;
	InitGum();
}

/****************************************************************************/
/** Cyclic function                                                        **/
/****************************************************************************/
_CYCLIC void cyclic()
{

	PulseTimer1.IN = 1;
	if(PulseTimer1.Q)
		PulseTimer1.IN = 0;
	TON_10ms(&PulseTimer1);
	Pulse_1s = PulseTimer1.Q;

	if(MachineType == BLUEFIN_XS)
	{
		Prewash();
		Rinse();
	}

	Gum();
	return;
}
/****************************************************************************/
/**                                                                        **/
/**                                 EOF                                    **/
/**                                                                        **/
/****************************************************************************/


